# ChinaUnicomMonitor (联通余量监控)

> **⚠️ 声明**：本项目基于网络公开的 JS 脚本逻辑重构，**全权由 AI (Gemini) 协助编写与优化**。本人（作者）仅做搬运、测试与维护，核心逻辑均源自原版思路。

## 📖 项目介绍

这是一个适用于 **青龙面板**、**Loon**、**Quantumult X** 等环境的 Python 脚本。
相比于传统的 Cookie 方式，本项目采用 **Token 登录机制**，显著解决了联通 APP 频繁切号导致 Cookie 失效的问题。

## ✨ 核心特性

- **稳定防掉线**：使用 `token_online` 换取临时 Cookie，配置一次，长期有效。
- **视觉优化**：回归经典的 `[■■■■□]` 进度条样式，流量剩余一目了然。
- **Bark 防爆**：针对 Bark 推送优化，支持逐条推送，防止多账号合并导致的消息截断。
- **隐私安全**：代码开源透明，不含任何 IMEI/UUID 等设备隐私上传逻辑。

## 🛠 获取 Token (忠于原版 JS 说明)

> 以下抓包步骤参考自原版 JS 脚本注释，经测试是最稳的获取方式。

1.  **前置动作**：打开联通 APP，点击 **“退出登录”**，然后选择 **“切换账号登录”**。
2.  **开始抓包**：开启抓包工具（Stream / Charles / HttpCanary 等），使用 **短信验证码** 登录 APP。
3.  **定位接口**：在抓包历史中，搜索并找到以下 URL 的请求：
    ```text
    [https://m.client.10010.com/mobileService/onLine.htm](https://m.client.10010.com/mobileService/onLine.htm)
    ```
4.  **提取参数**：查看该请求的 **请求体 (Request Body)**，复制 **`token_online`** 字段后的那一长串字符。
5.  **填写变量**：将提取的字符填入环境变量 `chinaUnicomCookie` 中。

## ⚙️ 环境变量配置

| 变量名 | 必填 | 说明 | 示例 |
| :--- | :---: | :--- | :--- |
| `chinaUnicomCookie` | ✅ | 核心 Token，多账号用 **换行** 或 `&` 隔开 | `token_value_1&token_value_2` |
| `UNICOM_PUSH_CFG` | ❌ | 推送白名单 (填序号，不填默认全推) | `1` (只推第1个); `1,3` (推第1和第3个) |
| `UNICOM_DETAIL_LEVEL` | ❌ | 详细模式 (填 `1` 开启) | `1` (显示每个流量包的进度条) |

## 📝 效果预览 (Bark)

> **联通: 8888**
> 💰 话费余额: 50.20元
> 💸 本月已消: 19.80元
> --------------------
> 📊 总流量: 15.50GB
> [■■■■■□□□□□] 用50.5% 余15GB
> 
> 📦 5G通用流量包
> [■■■■□□□□□□] 用45.2% 余10.00GB

## ⚠️ 免责声明

1. 本项目仅供 Python 学习与技术交流，请勿用于商业用途。
2. 脚本中涉及的 `APP_ID` 和 `USER_AGENT` 均为联通 APP 公开通用的客户端标识，不包含任何个人设备隐私信息。
3. 使用本脚本产生的任何后果由使用者自行承担。